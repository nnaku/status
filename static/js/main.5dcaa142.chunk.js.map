{"version":3,"sources":["components/PackageInfo/PackageInfo.module.scss","components/AppHeader/AppHeader.module.scss","components/ListItem/ListItem.module.scss","components/DragDropFileInput/DragDropFileInput.module.scss","App/App.module.scss","components/List/List.module.scss","components/Link/Link.module.scss","components/PackageList/PackageList.module.scss","store/state.js","store/contex.js","components/Dropzone/hooks.js","components/Dropzone/Dropzone.js","utils/statusFileParser.js","utils/classes.js","components/DragDropFileInput/DragDropFileInput.js","components/List/List.js","components/ListItem/ListItem.js","components/Link/Link.js","components/PackageList/PackageList.js","components/PackageInfo/PackageInfo.js","components/AppHeader/AppHeader.js","App/App.js","index.js"],"names":["module","exports","initialState","packages","selected","init","reducer","state","action","type","payload","dependents","Object","entries","reduce","acc","key","depends","flat","includes","Error","useStoreActions","dispatch","useContext","StoreContext","resetState","useCallback","setPackages","setSelected","makeDependentsByName","name","useStoreState","packageList","useMemo","keys","sort","a","b","localeCompare","hasPackageData","Boolean","hasPackages","length","createContext","StoreProvider","rest","useReducer","initState","Provider","value","require","useRef","useState","Dropzone","zoneProps","inputProps","children","data-testid","splitPackages","RegExp","splitPackageRows","rowToKeyValue","pkgVersionData","parseDependsFiel","trim","split","map","d","replace","rowKeyValueReducer","curRow","join","description","file","text","fileAsString","pkgAsStrArray","pkgObj","pgkAsStr","pkgAsObj","err","classes","Array","from","arguments","arg","isArray","filter","e","DragDropFileInput","className","error","setError","onDrop","isDragActive","setDragActive","zoneRef","inputRef","onChange","persist","target","files","onDragEnter","onDragLeave","onClick","current","click","onDragOver","preventDefault","handleDrop","dataTransfer","ref","hidden","useDropzone","statusFileParser","then","catch","styles","root","List","React","memo","classNames","ListItem","subHeader","active","Link","PackageList","index","array","id","href","PackageInfo","useEffect","data","center","cols","col","idx","i","AppHeader","title","status","spacer","App","window","location","hash","onhashchange","main","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.5dcaa142.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"PackageInfo_root__3oSrD\",\"center\":\"PackageInfo_center__33gDW\",\"cols\":\"PackageInfo_cols__2OGRB\",\"col\":\"PackageInfo_col__3eWxS\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"AppHeader_root__3uWQl\",\"spacer\":\"AppHeader_spacer__2SIRG\",\"title\":\"AppHeader_title__2ELPQ\",\"status\":\"AppHeader_status__3oHsX\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"ListItem_root__3wxIW\",\"subHeader\":\"ListItem_subHeader__1EFnF\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"DragDropFileInput_root__2Y-WX\",\"error\":\"DragDropFileInput_error__2yWxA\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"App_root__nWMuC\",\"main\":\"App_main__3N4Nf\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"List_root__q15eY\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"Link_root__3zyGI\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"PackageList_root__26mCV\"};","import { useCallback, useMemo, useContext } from \"react\";\nimport { StoreContext } from \"./contex\";\n\nexport const initialState = { packages: {}, selected: \"\" };\n\nexport function init(initialState) {\n  return initialState;\n}\n\nexport function reducer(state, action) {\n  switch (action.type) {\n    case \"init\":\n      return { ...initialState };\n    case \"setPackages\":\n      return { packages: action.payload };\n    case \"setSelected\":\n      return { ...state, selected: action.payload };\n    case \"makeDependentsByName\": {\n      const dependents = Object.entries(state.packages).reduce(\n        (acc, [key, { depends }]) =>\n          depends.flat().includes(action.payload) ? [...acc, key] : acc,\n        []\n      );\n      return {\n        ...state,\n        packages: {\n          ...state.packages,\n          [action.payload]: {\n            ...state.packages[action.payload],\n            dependents,\n          },\n        },\n      };\n    }\n\n    default:\n      throw new Error();\n  }\n}\n\nexport function useStoreActions() {\n  const { dispatch } = useContext(StoreContext);\n\n  // actions\n  const resetState = useCallback(() => dispatch({ type: \"init\" }), [dispatch]);\n\n  const setPackages = useCallback(\n    (packages) => dispatch({ type: \"setPackages\", payload: packages }),\n    [dispatch]\n  );\n\n  const setSelected = useCallback(\n    (selected) => dispatch({ type: \"setSelected\", payload: selected }),\n    [dispatch]\n  );\n\n  const makeDependentsByName = useCallback(\n    (name) => dispatch({ type: \"makeDependentsByName\", payload: name }),\n    [dispatch]\n  );\n\n  return { resetState, setPackages, setSelected, makeDependentsByName };\n}\n\nexport function useStoreState() {\n  const { state } = useContext(StoreContext);\n  // computed\n  const packageList = useMemo(\n    () => Object.keys(state.packages).sort((a, b) => a.localeCompare(b)),\n    [state.packages]\n  );\n\n  // check if pkg data exists (eq. alternatives)\n  const hasPackageData = useCallback(\n    (name) => Boolean(state.packages?.[name]),\n    [state.packages]\n  );\n\n  const hasPackages = useMemo(() => Boolean(packageList.length), [packageList]);\n\n  return { ...state, packageList, hasPackages, hasPackageData };\n}\n","import React, { createContext, useReducer } from \"react\";\n\nimport { reducer, initialState as initState, init } from \"./state\";\n\nexport const StoreContext = createContext({});\n\nexport default function StoreProvider({ initialState, ...rest }) {\n  const [state, dispatch] = useReducer(\n    reducer,\n    { ...initState, ...initialState },\n    init\n  );\n\n  return <StoreContext.Provider value={{ state, dispatch }} {...rest} />;\n}\n","const { useCallback, useRef, useState } = require(\"react\");\n\nexport function useDropzone({ onDrop, zoneProps, inputProps }) {\n  const [isDragActive, setDragActive] = useState(false);\n\n  const zoneRef = useRef(null);\n  const inputRef = useRef(null);\n\n  const onChange = useCallback(\n    (e) => {\n      e.persist();\n      onDrop(e.target.files);\n    },\n    [onDrop]\n  );\n\n  const onDragEnter = useCallback((e) => setDragActive(true), [setDragActive]);\n  const onDragLeave = useCallback((e) => setDragActive(false), [setDragActive]);\n\n  // transfer dropzone click to actual input (eg. open file browser dialog)\n  const onClick = useCallback(() => {\n    inputRef.current.value = null;\n    inputRef.current.click();\n  }, [inputRef]);\n\n  const onDragOver = useCallback((e) => {\n    e.preventDefault();\n    e.persist();\n  }, []);\n\n  const handleDrop = useCallback(\n    (e) => {\n      e.preventDefault();\n      e.persist();\n      onDrop(e.dataTransfer.files);\n      setDragActive(false);\n    },\n    [onDrop, setDragActive]\n  );\n\n  return [\n    {\n      ref: zoneRef,\n      onClick,\n      onDragOver,\n      onDrop: handleDrop,\n      onDragEnter,\n      onDragLeave,\n      ...zoneProps,\n    },\n    { ref: inputRef, type: \"file\", hidden: true, onChange, ...inputProps },\n    { isDragActive },\n  ];\n}\n","import React from \"react\";\n\nfunction Dropzone({ zoneProps, inputProps, children, ...rest }) {\n  return (\n    <div data-testid=\"Dropzone\" {...zoneProps} {...rest}>\n      <input {...inputProps} />\n      {children}\n    </div>\n  );\n}\n\nexport default Dropzone;\n","const splitPackages = new RegExp(/\\n\\n/);\nconst splitPackageRows = new RegExp(/\\n(?!\\s)/);\nconst rowToKeyValue = new RegExp(/:/); // TODO: Match only first \"Key: \"\nconst pkgVersionData = new RegExp(/\\n\\s.\\n/gm);\n\n// todo: refactor nested array to object e.q {name, isOptional, dataExists??}\nfunction parseDependsFiel(depends) {\n  return depends\n    .trim()\n    .split(\", \") //  split each dep to own array element\n    .map((d) =>\n      d\n        .trim() // for \"just in case\", makesure regexp replace below works.\n        .replace(/ \\(.+\\)$/, \"\") // get ridoff version data\n        .split(\" | \")\n    ); // split alternatives\n}\n\nfunction rowKeyValueReducer(acc, curRow) {\n  const [key, ...rest] = curRow.split(rowToKeyValue);\n  const value = rest.join(\":\").trim();\n  switch (key) {\n    case \"Package\":\n      return { ...acc, name: value };\n    case \"Description\":\n      return { ...acc, description: value.replace(pkgVersionData, \"\\n\\n\") }; // replace empty line \"notation\" with real empty line\n    case \"Depends\":\n      return { ...acc, depends: value };\n    default:\n      return acc;\n  }\n}\n\n/**\n * parse packages from status file.\n * @param {File} file - staus file\n * @returns {Object} Object of package Objects\n */\n\nexport default async function statusFileParser(file) {\n  // read file\n  const fileAsString = await file.text();\n  // split each pkg from txt file to own array element\n  const pkgAsStrArray = fileAsString.trim().split(splitPackages);\n\n  const pkgObj = pkgAsStrArray.reduce((acc, pgkAsStr) => {\n    const pkgAsObj = pgkAsStr\n      .split(splitPackageRows)\n      .reduce(rowKeyValueReducer, {});\n\n    pkgAsObj.depends = pkgAsObj.depends\n      ? parseDependsFiel(pkgAsObj.depends)\n      : [];\n\n    // return only \"valid\" packages\n    if (pkgAsObj.name && pkgAsObj.description && pkgAsObj.depends) {\n      return { ...acc, [pkgAsObj.name]: { ...pkgAsObj, dependents: null } };\n    }\n    return acc;\n  }, {});\n\n  if (!Object.keys(pkgObj).length) {\n    let err = new Error(\"Bad file?\");\n    err.name = \"BadFileError\";\n    throw err;\n  }\n\n  return pkgObj;\n}\n","export default function classes() {\n  return Array.from(arguments)\n    .map((arg) => {\n      switch (typeof arg) {\n        case \"string\": {\n          return arg;\n        }\n\n        case \"object\": {\n          if (arg === null) {\n            return arg;\n          } else if (Array.isArray(arg)) {\n            return classes(...arg);\n          } else {\n            return Object.entries(arg)\n              .reduce(\n                (acc, [key, value]) =>\n                  value && typeof value !== \"function\" ? `${acc} ${key}` : acc,\n                \"\"\n              )\n              .trim();\n          }\n        }\n\n        default:\n          return \"\";\n      }\n    })\n    .filter((e) => Boolean(e))\n    .join(\" \")\n    .trim();\n}\n","import React, { useState } from \"react\";\n\nimport { useStoreActions } from \"../../store\";\n\nimport Dropzone, { useDropzone } from \"components/Dropzone\";\nimport statusFileParser from \"utils/statusFileParser\";\nimport classes from \"utils/classes\";\n\nimport styles from \"./DragDropFileInput.module.scss\";\n\nexport default function DragDropFileInput({ className }) {\n  const { setPackages } = useStoreActions();\n  const [error, setError] = useState(\"\");\n\n  const [zoneProps, inputProps, { isDragActive }] = useDropzone({\n    onDrop: (files) =>\n      statusFileParser(files[0])\n        .then(setPackages)\n        .catch((error) =>\n          setError(\n            error.name === \"BadFileError\"\n              ? \"Check input file! Cannot find any package data!\"\n              : \"Something went wrong.\"\n          )\n        ),\n    zoneProps: { className: classes(styles.root, className) },\n  });\n\n  return (\n    <Dropzone\n      data-testid=\"DragDropFileInput\"\n      zoneProps={zoneProps}\n      inputProps={inputProps}\n    >\n      {error && <div className={styles.error}>{error}</div>}\n      {isDragActive ? \"DROP IT!\" : \"Drag and Drop or select the file\"}\n    </Dropzone>\n  );\n}\n","import React, { useMemo } from \"react\";\nimport classes from \"utils/classes\";\nimport styles from \"./List.module.scss\";\n\nconst List = React.memo(({ className, ...rest }) => {\n  const classNames = useMemo(() => classes(className, styles.root), [\n    className,\n  ]);\n\n  return <ul data-testid=\"List\" className={classNames} {...rest} />;\n});\n\nexport default List;\n","import React, { useMemo } from \"react\";\nimport classes from \"utils/classes\";\nimport styles from \"./ListItem.module.scss\";\n\nconst ListItem = React.memo(({ subHeader, active, className, ...rest }) => {\n  const classNames = useMemo(\n    () =>\n      classes(\n        className,\n        styles.root,\n        { [styles.active]: active },\n        { [styles.subHeader]: subHeader }\n      ),\n    [className, active, subHeader]\n  );\n\n  return <li data-testid=\"ListItem\" className={classNames} {...rest} />;\n});\n\nexport default ListItem;\n","import React, { useMemo } from \"react\";\nimport classes from \"utils/classes\";\nimport styles from \"./Link.module.scss\";\n\nconst Link = React.memo(({ className, children, ...rest }) => {\n  const classNames = useMemo(() => classes(className, styles.root), [\n    className,\n  ]);\n  return (\n    <a className={classNames} {...rest}>\n      {children}\n    </a>\n  );\n});\n\nexport default Link;\n","import React, { Fragment } from \"react\";\nimport { useStoreState } from \"../../store\";\nimport List from \"components/List\";\nimport ListItem from \"components/ListItem\";\nimport Link from \"components/Link\";\n\nimport styles from \"./PackageList.module.scss\";\nimport classes from \"utils/classes\";\n\nexport default function PackageList({ className }) {\n  const { packageList } = useStoreState();\n\n  return (\n    <List data-testid=\"PackageList\" className={classes(styles.root, className)}>\n      {packageList.map((e, index, array) => (\n        <Fragment key={e}>\n          {/* when starting letter changes, render sub header*/}\n          {e[0] !== array[index - 1]?.[0] && (\n            <ListItem subHeader id={e[0]}>\n              {e[0]}\n            </ListItem>\n          )}\n          <ListItem id={e}>\n            <Link href={`#${e}`}>{e}</Link>\n          </ListItem>\n        </Fragment>\n      ))}\n    </List>\n  );\n}\n","import React, { useMemo, useEffect, Fragment } from \"react\";\nimport { useStoreState, useStoreActions } from \"../../store\";\n\nimport styles from \"./PackageInfo.module.scss\";\nimport ListItem from \"components/ListItem\";\nimport Link from \"components/Link\";\nimport List from \"components/List\";\nimport classes from \"utils/classes\";\n\nfunction PackageInfo({ className }) {\n  const { packages, selected, hasPackageData } = useStoreState();\n  const { makeDependentsByName } = useStoreActions();\n\n  useEffect(() => {\n    if (packages[selected]?.dependents === null) {\n      // kida lazyload dependents (reverse depends) value.\n      // null === value not uses/asked before.\n      makeDependentsByName(selected);\n    }\n  }, [selected, packages, makeDependentsByName]);\n\n  const data = useMemo(() => packages?.[selected], [packages, selected]);\n\n  return (\n    <div\n      data-testid=\"PackageInfo\"\n      className={classes(styles.root, { [styles.center]: !data }, className)}\n    >\n      {data ? (\n        <Fragment>\n          <h3>Name: {data.name}</h3>\n          <h3>Description</h3>\n          <p>{data.description}</p>\n          <div className={styles.cols}>\n            <div className={styles.col}>\n              <h3>Depends</h3>\n              <List>\n                {data.depends.map((d, idx) => (\n                  <ListItem key={`data.name.depends[${idx}]`}>\n                    <span>\n                      {d.map((i) =>\n                        hasPackageData(i) ? (\n                          <Link\n                            data-testid={`PackageInfoDependsItem_${i}`}\n                            key={i}\n                            href={`#${i}`}\n                          >\n                            {i}\n                          </Link>\n                        ) : (\n                          i\n                        )\n                      )}\n                    </span>\n                  </ListItem>\n                ))}\n              </List>\n            </div>\n            <div className={styles.col}>\n              <span>\n                <h3>Dependents (Reverse dependencies)</h3>\n              </span>\n\n              {data?.dependents === null ? (\n                \"Loading...\"\n              ) : (\n                <List>\n                  {data?.dependents?.map((i) => (\n                    <ListItem\n                      data-testid={`PackageInfoDependentsItem_${i}`}\n                      key={i}\n                    >\n                      <Link href={`#${i}`}>{i}</Link>\n                    </ListItem>\n                  ))}\n                </List>\n              )}\n            </div>\n          </div>{\" \"}\n        </Fragment>\n      ) : (\n        <div>Select package</div>\n      )}\n    </div>\n  );\n}\n\nexport default PackageInfo;\n","import React from \"react\";\n\nimport styles from \"./AppHeader.module.scss\";\nimport { useStoreState, useStoreActions } from \"../../store\";\nimport Link from \"components/Link\";\nfunction AppHeader() {\n  const { hasPackages } = useStoreState();\n  const { resetState } = useStoreActions();\n\n  return (\n    <header data-testid=\"AppHeader\" className={styles.root}>\n      <div className={styles.title}>\n        <span>/var/lib/dpkg/</span>\n        <span className={styles.status}>\n          <Link href=\"#\">status</Link>\n        </span>\n        <span>explorer</span>\n      </div>\n      <div className={styles.spacer} />\n      {hasPackages && <button onClick={resetState}>remove file</button>}\n    </header>\n  );\n}\n\nexport default AppHeader;\n","import React, { useEffect, Fragment } from \"react\";\n\nimport { useStoreState, useStoreActions } from \"../store\";\n\nimport DragDropFileInput from \"components/DragDropFileInput\";\nimport PackageList from \"components/PackageList\";\nimport PackageInfo from \"components/PackageInfo\";\nimport AppHeader from \"components/AppHeader\";\n\nimport styles from \"./App.module.scss\";\n\nfunction App() {\n  const { hasPackages } = useStoreState();\n  const { setSelected } = useStoreActions();\n\n  useEffect(() => {\n    if (!hasPackages) {\n      window.location.hash = \"#\";\n    }\n  }, [hasPackages]);\n\n  useEffect(() => {\n    window.onhashchange = () =>\n      setSelected(window.location.hash.replace(\"#\", \"\"));\n\n    return () => (window.onhashchange = null);\n  }, [setSelected]);\n\n  return (\n    <div data-testid=\"App\" id=\"App\" className={styles.root}>\n      <AppHeader />\n      <main data-testid=\"App.main\" className={styles.main}>\n        {hasPackages ? (\n          <Fragment>\n            <PackageList />\n            <PackageInfo />\n          </Fragment>\n        ) : (\n          <DragDropFileInput />\n        )}\n      </main>\n    </div>\n  );\n}\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\n\nimport App from \"App\";\nimport { StoreProvider } from \"./store\";\n\nimport \"index.css\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <StoreProvider>\n      <App />\n    </StoreProvider>\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n"],"sourceRoot":""}