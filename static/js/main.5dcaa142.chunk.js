(this.webpackJsonpstatus=this.webpackJsonpstatus||[]).push([[0],[,,,,,,function(e,t,a){e.exports={root:"PackageInfo_root__3oSrD",center:"PackageInfo_center__33gDW",cols:"PackageInfo_cols__2OGRB",col:"PackageInfo_col__3eWxS"}},,function(e,t,a){e.exports={root:"AppHeader_root__3uWQl",spacer:"AppHeader_spacer__2SIRG",title:"AppHeader_title__2ELPQ",status:"AppHeader_status__3oHsX"}},,,,,function(e,t,a){e.exports={root:"ListItem_root__3wxIW",subHeader:"ListItem_subHeader__1EFnF"}},,function(e,t,a){e.exports={root:"DragDropFileInput_root__2Y-WX",error:"DragDropFileInput_error__2yWxA"}},function(e,t,a){e.exports={root:"App_root__nWMuC",main:"App_main__3N4Nf"}},,,,,function(e,t,a){e.exports={root:"List_root__q15eY"}},function(e,t,a){e.exports={root:"Link_root__3zyGI"}},function(e,t,a){e.exports={root:"PackageList_root__26mCV"}},function(e,t,a){e.exports=a(31)},,,,,,function(e,t,a){},function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(18),s=a.n(c),o=a(1),l=a(3),i=a(4),u=a(2),p=a(12),d={packages:{},selected:""};function m(e){return e}function f(e,t){switch(t.type){case"init":return Object(o.a)({},d);case"setPackages":return{packages:t.payload};case"setSelected":return Object(o.a)(Object(o.a)({},e),{},{selected:t.payload});case"makeDependentsByName":var a=Object.entries(e.packages).reduce((function(e,a){var n=Object(l.a)(a,2),r=n[0];return n[1].depends.flat().includes(t.payload)?[].concat(Object(p.a)(e),[r]):e}),[]);return Object(o.a)(Object(o.a)({},e),{},{packages:Object(o.a)(Object(o.a)({},e.packages),{},Object(u.a)({},t.payload,Object(o.a)(Object(o.a)({},e.packages[t.payload]),{},{dependents:a})))});default:throw new Error}}function b(){var e=Object(n.useContext)(O).dispatch;return{resetState:Object(n.useCallback)((function(){return e({type:"init"})}),[e]),setPackages:Object(n.useCallback)((function(t){return e({type:"setPackages",payload:t})}),[e]),setSelected:Object(n.useCallback)((function(t){return e({type:"setSelected",payload:t})}),[e]),makeDependentsByName:Object(n.useCallback)((function(t){return e({type:"makeDependentsByName",payload:t})}),[e])}}function j(){var e=Object(n.useContext)(O).state,t=Object(n.useMemo)((function(){return Object.keys(e.packages).sort((function(e,t){return e.localeCompare(t)}))}),[e.packages]),a=Object(n.useCallback)((function(t){var a;return Boolean(null===(a=e.packages)||void 0===a?void 0:a[t])}),[e.packages]),r=Object(n.useMemo)((function(){return Boolean(t.length)}),[t]);return Object(o.a)(Object(o.a)({},e),{},{packageList:t,hasPackages:r,hasPackageData:a})}var O=Object(n.createContext)({});function v(e){var t=e.initialState,a=Object(i.a)(e,["initialState"]),c=Object(n.useReducer)(f,Object(o.a)(Object(o.a)({},d),t),m),s=Object(l.a)(c,2),u=s[0],p=s[1];return r.a.createElement(O.Provider,Object.assign({value:{state:u,dispatch:p}},a))}var g=a(0),E=g.useCallback,k=g.useRef,_=g.useState;var h=function(e){var t=e.zoneProps,a=e.inputProps,n=e.children,c=Object(i.a)(e,["zoneProps","inputProps","children"]);return r.a.createElement("div",Object.assign({"data-testid":"Dropzone"},t,c),r.a.createElement("input",a),n)},y=a(14),D=a.n(y),N=a(19),P=a(20),w=new RegExp(/\n\n/),x=new RegExp(/\n(?!\s)/),I=new RegExp(/:/),C=new RegExp(/\n\s.\n/gm);function A(e){return e.trim().split(", ").map((function(e){return e.trim().replace(/ \(.+\)$/,"").split(" | ")}))}function S(e,t){var a=t.split(I),n=Object(P.a)(a),r=n[0],c=n.slice(1).join(":").trim();switch(r){case"Package":return Object(o.a)(Object(o.a)({},e),{},{name:c});case"Description":return Object(o.a)(Object(o.a)({},e),{},{description:c.replace(C,"\n\n")});case"Depends":return Object(o.a)(Object(o.a)({},e),{},{depends:c});default:return e}}function L(){return(L=Object(N.a)(D.a.mark((function e(t){var a,n,r,c;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.text();case 2:if(a=e.sent,n=a.trim().split(w),r=n.reduce((function(e,t){var a=t.split(x).reduce(S,{});return a.depends=a.depends?A(a.depends):[],a.name&&a.description&&a.depends?Object(o.a)(Object(o.a)({},e),{},Object(u.a)({},a.name,Object(o.a)(Object(o.a)({},a),{},{dependents:null}))):e}),{}),Object.keys(r).length){e.next=9;break}throw(c=new Error("Bad file?")).name="BadFileError",c;case 9:return e.abrupt("return",r);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function B(){return Array.from(arguments).map((function(e){switch(typeof e){case"string":return e;case"object":return null===e?e:Array.isArray(e)?B.apply(void 0,Object(p.a)(e)):Object.entries(e).reduce((function(e,t){var a=Object(l.a)(t,2),n=a[0],r=a[1];return r&&"function"!==typeof r?"".concat(e," ").concat(n):e}),"").trim();default:return""}})).filter((function(e){return Boolean(e)})).join(" ").trim()}var H=a(15),F=a.n(H);function R(e){var t=e.className,a=b().setPackages,c=Object(n.useState)(""),s=Object(l.a)(c,2),i=s[0],u=s[1],p=function(e){var t=e.onDrop,a=e.zoneProps,n=e.inputProps,r=_(!1),c=Object(l.a)(r,2),s=c[0],i=c[1],u=k(null),p=k(null),d=E((function(e){e.persist(),t(e.target.files)}),[t]),m=E((function(e){return i(!0)}),[i]),f=E((function(e){return i(!1)}),[i]),b=E((function(){p.current.value=null,p.current.click()}),[p]),j=E((function(e){e.preventDefault(),e.persist()}),[]),O=E((function(e){e.preventDefault(),e.persist(),t(e.dataTransfer.files),i(!1)}),[t,i]);return[Object(o.a)({ref:u,onClick:b,onDragOver:j,onDrop:O,onDragEnter:m,onDragLeave:f},a),Object(o.a)({ref:p,type:"file",hidden:!0,onChange:d},n),{isDragActive:s}]}({onDrop:function(e){return function(e){return L.apply(this,arguments)}(e[0]).then(a).catch((function(e){return u("BadFileError"===e.name?"Check input file! Cannot find any package data!":"Something went wrong.")}))},zoneProps:{className:B(F.a.root,t)}}),d=Object(l.a)(p,3),m=d[0],f=d[1],j=d[2].isDragActive;return r.a.createElement(h,{"data-testid":"DragDropFileInput",zoneProps:m,inputProps:f},i&&r.a.createElement("div",{className:F.a.error},i),j?"DROP IT!":"Drag and Drop or select the file")}var M=a(21),z=a.n(M),W=r.a.memo((function(e){var t=e.className,a=Object(i.a)(e,["className"]),c=Object(n.useMemo)((function(){return B(t,z.a.root)}),[t]);return r.a.createElement("ul",Object.assign({"data-testid":"List",className:c},a))})),G=a(13),J=a.n(G),Q=r.a.memo((function(e){var t=e.subHeader,a=e.active,c=e.className,s=Object(i.a)(e,["subHeader","active","className"]),o=Object(n.useMemo)((function(){return B(c,J.a.root,Object(u.a)({},J.a.active,a),Object(u.a)({},J.a.subHeader,t))}),[c,a,t]);return r.a.createElement("li",Object.assign({"data-testid":"ListItem",className:o},s))})),T=a(22),X=a.n(T),Y=r.a.memo((function(e){var t=e.className,a=e.children,c=Object(i.a)(e,["className","children"]),s=Object(n.useMemo)((function(){return B(t,X.a.root)}),[t]);return r.a.createElement("a",Object.assign({className:s},c),a)})),q=a(23),V=a.n(q);function $(e){var t=e.className,a=j().packageList;return r.a.createElement(W,{"data-testid":"PackageList",className:B(V.a.root,t)},a.map((function(e,t,a){var c;return r.a.createElement(n.Fragment,{key:e},e[0]!==(null===(c=a[t-1])||void 0===c?void 0:c[0])&&r.a.createElement(Q,{subHeader:!0,id:e[0]},e[0]),r.a.createElement(Q,{id:e},r.a.createElement(Y,{href:"#".concat(e)},e)))})))}var K=a(6),U=a.n(K);var Z=function(e){var t,a=e.className,c=j(),s=c.packages,o=c.selected,l=c.hasPackageData,i=b().makeDependentsByName;Object(n.useEffect)((function(){var e;null===(null===(e=s[o])||void 0===e?void 0:e.dependents)&&i(o)}),[o,s,i]);var p=Object(n.useMemo)((function(){return null===s||void 0===s?void 0:s[o]}),[s,o]);return r.a.createElement("div",{"data-testid":"PackageInfo",className:B(U.a.root,Object(u.a)({},U.a.center,!p),a)},p?r.a.createElement(n.Fragment,null,r.a.createElement("h3",null,"Name: ",p.name),r.a.createElement("h3",null,"Description"),r.a.createElement("p",null,p.description),r.a.createElement("div",{className:U.a.cols},r.a.createElement("div",{className:U.a.col},r.a.createElement("h3",null,"Depends"),r.a.createElement(W,null,p.depends.map((function(e,t){return r.a.createElement(Q,{key:"data.name.depends[".concat(t,"]")},r.a.createElement("span",null,e.map((function(e){return l(e)?r.a.createElement(Y,{"data-testid":"PackageInfoDependsItem_".concat(e),key:e,href:"#".concat(e)},e):e}))))})))),r.a.createElement("div",{className:U.a.col},r.a.createElement("span",null,r.a.createElement("h3",null,"Dependents (Reverse dependencies)")),null===(null===p||void 0===p?void 0:p.dependents)?"Loading...":r.a.createElement(W,null,null===p||void 0===p||null===(t=p.dependents)||void 0===t?void 0:t.map((function(e){return r.a.createElement(Q,{"data-testid":"PackageInfoDependentsItem_".concat(e),key:e},r.a.createElement(Y,{href:"#".concat(e)},e))})))))," "):r.a.createElement("div",null,"Select package"))},ee=a(8),te=a.n(ee);var ae=function(){var e=j().hasPackages,t=b().resetState;return r.a.createElement("header",{"data-testid":"AppHeader",className:te.a.root},r.a.createElement("div",{className:te.a.title},r.a.createElement("span",null,"/var/lib/dpkg/"),r.a.createElement("span",{className:te.a.status},r.a.createElement(Y,{href:"#"},"status")),r.a.createElement("span",null,"explorer")),r.a.createElement("div",{className:te.a.spacer}),e&&r.a.createElement("button",{onClick:t},"remove file"))},ne=a(16),re=a.n(ne);var ce=function(){var e=j().hasPackages,t=b().setSelected;return Object(n.useEffect)((function(){e||(window.location.hash="#")}),[e]),Object(n.useEffect)((function(){return window.onhashchange=function(){return t(window.location.hash.replace("#",""))},function(){return window.onhashchange=null}}),[t]),r.a.createElement("div",{"data-testid":"App",id:"App",className:re.a.root},r.a.createElement(ae,null),r.a.createElement("main",{"data-testid":"App.main",className:re.a.main},e?r.a.createElement(n.Fragment,null,r.a.createElement($,null),r.a.createElement(Z,null)):r.a.createElement(R,null)))};a(30);s.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(v,null,r.a.createElement(ce,null))),document.getElementById("root"))}],[[24,1,2]]]);
//# sourceMappingURL=main.5dcaa142.chunk.js.map